---
title: "AgentCore Runtime の Lambda デプロイでタイムアウトエラーが発生した時の対処法"
emoji: "🤖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["agentcore", "lambda", "aws", "aiagent"]
published: true
---

`agentcore` コマンドで AgentCore Runtime をデプロイする場合に以下のエラーが発生することがあります。

```bash
❌ Agent invocation failed: An error occurred (RuntimeClientError) when calling the InvokeAgentRuntime operation: An error occurred when starting the runtime. Please check your CloudWatch logs for more information.
```

## 原因
Lambda 関数のタイムアウトが短いために、Agent Runtime の起動が完了する前にタイムアウトしてしまうことが原因です。

## 対策
Container を選択することです。依存関係は既にイメージ内に含まれているため、起動が速いです。`agentcore configure` コマンドでは Lambda がデフォルトで選択されるため、Container を選択する必要があります。

```yaml:.bedrock_agentcore.yaml
    deployment_type: container
    runtime_type: null
    platform: linux/arm64
    container_runtime: docker
```

## まとめ

Lambda は軽量なエージェントであれば問題になりにくいと思いますが、依存関係が多い場合は Container を選択することをお勧めします。そもそも、Lambda での実行が適切かどうかも含めて検討する必要があります。なぜなら、エージェントの処理が軽量である場合が少なく、Lambda が適切でない場合が多いためです。

## Closing

「はじめまして。」

「お疲れ様でした。」

この言葉を繰り返しているような気がします。事業の始動や終わりに立ち会うことが多いからでしょうか。

変わらないのは、自分が楽しいと感じることをやっていることです。

いつ終わりが来るかわからないからこそ、今を楽しむことが大切だと思います。
