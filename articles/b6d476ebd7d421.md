---
title: "Bedrock で始める Claude Code"
emoji: "▶️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["claude", "bedrock", "llm", "vscode"]
published: true
---

## tl;dr

- 会社のクラウド環境が AWS の場合、Amazon Bedrock を利用することで、Claude Code の機能を活用することが可能である。
- Amazon Bedrock で Claude Code を 利用することで、並走型の Coding Agent としての機能を活用できる。
- Claude Code は、「Claude Opus 4」（Claude Max）を利用することで、より高度な並走が可能になる。

## 前提

Claude Code は、これまでに登場してきた伴走型の Coding Agent とは違い、並走して開発を進めることができる Coding Agent だと考えている。開発者はより効率的にコードを書くことができるようになる。

もし、有料プラン「Claude Max」を利用できる場合は、「Claude Opus 4」（Opus）と言う優れた LLM モデルを利用することができ、開発の並走がより現実的になる。Opus は、コードの生成や修正において、より高い精度を提供する。

一方で、色々な AI 系のサブスクを契約している場合、コストの問題で「Claude Pro」や「Claude Max」といった有料プランを利用できない場合もある。

## Prerequisites

- AWS CLI がインストールされていること
- VS Code などのエディタがインストールされていること

## Setup

Amazon Bedrock で Claude Code を利用するためには、以下の手順で設定する。

1. Amazon Bedrock のコンソールにアクセスする。
1. モデルアクセスをリクエストする。
![model access](/images/b6d476ebd7d421-a.png)
1. Inference profile ID を取得する。
![inference profile ID](/images/b6d476ebd7d421-b.png)
1. VS Code などのエディタで、以下の設定を追加する。
    ```json:./.claude/settings.json
    {
    "env": {
        "CLAUDE_CODE_USE_BEDROCK": "true",
        "ANTHROPIC_MODEL": "apac.anthropic.claude-sonnet-4-20250514-v1:0",
        "AWS_REGION": "ap-northeast-1",
        "AWS_PROFILE": "default",
        "CLAUDE_CODE_MAX_OUTPUT_TOKENS": "32000"
    }
    }
    ```
1. `aws configure sso` を実行し、AWS CLI の SSO 認証を設定する。これにより、Amazon Bedrock へのアクセスが可能になる。
    ```bash
    aws configure sso
    ```
1. Claude Code を起動する。`settings.json` が存在する場合、自動的に設定が読み込まれ、通常の認証情報を入力する必要はない。
![extension](/images/b6d476ebd7d421-c.png)

## Summary

Amazon Bedrock で Claude Code を利用することで、並走型の Coding Agent としての機能を活用できる。Claude Code は、Opus を利用することで、より高度な並走が可能になる。

## Closing

現職の在職期間は 1 年を超えた。この 1 年で、AI の進化と自分の関わるプロダクトの変化のギャップを感じている。特に、AI の進化は目覚ましく、これまでの開発スタイルやプロセスを大きく変える可能性があると感じている。
今、自分自身が取り組む課題が自分の成長につながるのか、または自分が情熱を持って取り組むべき課題なのか、常に自問自答している。
