---
title: "E2Eテストの自動化から可視化 - Self-hosted runner × Amplify Hosting -"
emoji: "⛳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

## tl;dr

## 前提

### BPaaS サービスとは


self-hosted runner で E2E Testing を行う
https://docs.aws.amazon.com/ja_jp/codebuild/latest/userguide/action-runner-questions.html

認証を通す必要があるが、OktaのAuth0を通すのは難しい。そのため、Web App はworkflowの中で起動することにする

OIDC を使ったplaywright-reportのS3へのデプロイ
https://docs.github.com/ja/actions/security-for-github-actions/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services

カスタム信頼性ポリシーを使ったIAMロールの作成
https://docs.github.com/ja/actions/security-for-github-actions/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services

playwright-reportの共有を行う
https://playwright.dev/docs/test-reporters#html-reporter

レポートの共有にはAmplify Hostingを使う。AmplifyとS3は統合されているため、簡単にデプロイできる
https://aws.amazon.com/jp/blogs/news/simplify-and-enhance-amazon-s3-static-website-hosting-with-aws-amplify/

外部に公開しないために、WAFを使う.WAFは現状Preview
https://docs.aws.amazon.com/amplify/latest/userguide/WAF-integration.html
