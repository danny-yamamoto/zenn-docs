---
title: "Remix: Migrate to stable and Cloudflare Pages"
emoji: "ğŸ’¿"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["remix", "vite", "react", "cloudflare"]
published: true
---
Remix Vite ã«ã¤ã„ã¦ã€‚

https://remix.run/blog/remix-vite-stable

Remix Vite ãŒ stable ã«ãªã£ãŸã‚‰ã—ã„ã€‚

[unstable](https://zenn.dev/dannya/articles/1d47d2af6fd7d5) ã‹ã‚‰ã®å¤‰æ›´ç‚¹ã‚’ç¢ºèªã™ã‚‹ã€‚å€‹äººçš„ãª memo ã¨ã—ã¦ã€‚

## Changes
### HMR & HDR
- `LiveReload` ã®å‰Šé™¤ã€‚

https://github.com/danny-yamamoto/my-portfolio-remix-vite/commit/dd0dc72ae9da1fb5819b1e2b51d48034e8987b22#diff-4133eb55408b25b35b8e07c696a9dfc97b741c555d7407e8c86d0845e5eecc28

> Vite provides a robust client-side runtime for development features like HMR, making the <LiveReload /> component obsolete. When using the Remix Vite plugin in development, the <Scripts /> component will automatically include Vite's client-side runtime and other dev-only scripts.
> 
> Vite ã¯ HMR ã®ã‚ˆã†ãªé–‹ç™ºæ©Ÿèƒ½ã®ãŸã‚ã®å …ç‰¢ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’æä¾›ã—ã€<LiveReload />ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ™‚ä»£é…ã‚Œã®ã‚‚ã®ã«ã—ã¦ã„ã¾ã™ã€‚Remix Vite ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã§ä½¿ç”¨ã™ã‚‹å ´åˆã€<Scripts />ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯è‡ªå‹•çš„ã« Vite ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ä»–ã®é–‹ç™ºå°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å«ã¿ã¾ã™ã€‚

https://remix.run/docs/en/main/future/vite#hmr--hdr

### npm scripts
- `typegen` ã®è¿½åŠ ã€‚D1 ã‚„ KV ã® binding ã®ç”Ÿæˆã€‚

> Generate types for your Cloudflare bindings in `wrangler.toml`

https://github.com/danny-yamamoto/my-portfolio-remix-vite/blob/0f9082e21dceba3966b0b880435c672eb141adc5/package.json#L13

## Run the Vite dev server
```bash: log
node âœ /workspaces/my-portfolio-remix-vite (main) $ npm run dev

> dev
> remix vite:dev

  âœ  Local:   http://localhost:5173/
  âœ  Network: use --host to expose
  âœ  press h + enter to show help
```

## Run Cloudflare Pages
```bash: log
14:41:27.919	> build
14:41:27.919	> remix vite:build
14:41:27.919	
14:41:30.266	vite v5.1.4 building for production...
14:41:30.316	transforming...
14:41:31.432	âœ“ 91 modules transformed.
14:41:31.522	rendering chunks...
14:41:31.591	computing gzip size...
14:41:31.604	build/client/.vite/manifest.json                          2.43 kB â”‚ gzip:  0.44 kB
14:41:31.604	build/client/assets/portfolio--74uhlYO.css                0.73 kB â”‚ gzip:  0.39 kB
14:41:31.605	build/client/assets/portfolio._index-nV_cara9.js          0.17 kB â”‚ gzip:  0.16 kB
14:41:31.605	build/client/assets/portfolio.certificates-YeXXrt_T.js    0.26 kB â”‚ gzip:  0.22 kB
14:41:31.605	build/client/assets/portfolio.experience-YtR9istW.js      0.29 kB â”‚ gzip:  0.24 kB
14:41:31.605	build/client/assets/portfolio.articles-g40nNTOX.js        0.34 kB â”‚ gzip:  0.26 kB
14:41:31.605	build/client/assets/_index-4iN_pvKD.js                    0.72 kB â”‚ gzip:  0.42 kB
14:41:31.605	build/client/assets/portfolio-IhPxw77n.js                 1.05 kB â”‚ gzip:  0.45 kB
14:41:31.606	build/client/assets/root-ZkF9plZM.js                      1.44 kB â”‚ gzip:  0.84 kB
14:41:31.606	build/client/assets/jsx-runtime-NroC4D4D.js               8.09 kB â”‚ gzip:  3.05 kB
14:41:31.606	build/client/assets/entry.client-kZ74JvoI.js             14.18 kB â”‚ gzip:  4.95 kB
14:41:31.606	build/client/assets/components-_3L0V7zO.js              212.88 kB â”‚ gzip: 68.82 kB
14:41:31.606	âœ“ built in 1.31s
14:41:31.906	vite v5.1.4 building SSR bundle for production...
14:41:31.910	transforming...
14:41:31.974	âœ“ 14 modules transformed.
14:41:31.984	rendering chunks...
14:41:31.986	build/server/.vite/manifest.json                0.19 kB
14:41:31.986	build/server/assets/server-build--74uhlYO.css   0.73 kB
14:41:31.986	build/server/index.js                          13.08 kB
14:41:31.987	âœ“ built in 80ms
14:41:32.038	Finished
14:41:32.039	Found Functions directory at /functions. Uploading.
14:41:33.327	âœ¨ Compiled Worker successfully
14:41:33.376	Validating asset output directory
14:41:34.047	Deploying your site to Cloudflare's global network...
14:41:38.154	Uploading... (13/13)
14:41:38.155	âœ¨ Success! Uploaded 0 files (13 already uploaded) (0.31 sec)
14:41:38.155	
14:41:38.572	âœ¨ Upload complete!
14:41:40.618	Success: Assets published!
14:41:44.502	Success: Your site was deployed!
```
https://my-portfolio-remix-vite.pages.dev/portfolio

## BTW
4æœˆä»¥é™ã®ç›®æ¨™ãŒæ±ºã¾ã£ãŸã€‚

ã“ã®æ•°ãƒ¶æœˆã§ã€æ”¹ã‚ã¦è‡ªåˆ†ã¨å‘ãåˆã†ã“ã¨ãŒå‡ºæ¥ãŸã€‚

ãã—ã¦ã€å€‹äººçš„ã«ã€ã“ã®è©±ã¯ã¨ã¦ã‚‚å‚è€ƒã«ãªã£ãŸã€‚

https://www.youtube.com/watch?v=LLaCjrqhNw4

- ç”Ÿãç”Ÿãã—ã¦ã„ã‚‹ã“ã¨ã€‚
- çŸ¥è­˜ã‚’ç¶™ç¶šã—ã¦å¢—ã‚„ã™ã“ã¨ã€‚
- åŒã˜ã“ã¨ã§ã‚‚é•ã†æ–¹æ³•ã‚’æ¨¡ç´¢ã™ã‚‹ã“ã¨ã€‚

ç§ã‚‚è‡ªå·±æˆé•·ã‚’æ±‚ã‚ã¦ã„ããŸã„ã€‚ç«‹ã¡æ­¢ã¾ã‚‹ã“ã¨ãªãã€‚
